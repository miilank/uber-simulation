<div class="bg-white rounded-xl shadow-md h-full flex flex-col">
  <div class="p-5 border-b border-gray-200">
    <h3 class="text-lg font-semibold text-gray-800">Conversations</h3>
  </div>

  <div class="flex-1 overflow-y-auto">
    <div *ngIf="conversations.length === 0" class="p-5 text-center text-gray-400">
      <p>No conversations yet</p>
    </div>

    <div
      *ngFor="let conversation of conversations"
      (click)="selectConversation(conversation.userId)"
      [class.bg-gray-100]="selectedUserId === conversation.userId"
      class="p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors">

      <div class="flex items-center justify-between mb-1">
        <h4 class="font-semibold text-gray-800 text-sm truncate">
          {{ conversation.userName }}
        </h4>
        <div class="flex items-center gap-2 flex-shrink-0 ml-2">
          <span class="text-xs text-gray-400">
            {{ formatTime(conversation.lastMessageTime) }}
          </span>
          <span *ngIf="conversation.unreadCount > 0"
                class="bg-red-500 text-white text-xs px-2 py-0.5 rounded-full font-semibold">
            {{ conversation.unreadCount > 9 ? '9+' : conversation.unreadCount }}
          </span>
        </div>
      </div>

      <div class="flex items-center justify-between gap-2">
        <p class="text-sm text-gray-500 truncate flex-1"
           [class.font-semibold]="conversation.unreadCount > 0">
          {{ truncateMessage(conversation.lastMessage) }}
        </p>
        <span
          [ngClass]="getRoleBadgeClass(conversation.userRole)"
          class="px-2 py-0.5 rounded text-xs font-medium flex-shrink-0">
          {{ conversation.userRole }}
        </span>
      </div>
    </div>
  </div>
</div>
